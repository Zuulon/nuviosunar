{"version":3,"sources":["../../../src/handlers/group/group.ts"],"names":["getGroupStoreKey","groups","handleCooldown","handleProtectors"],"mappings":";;;;;;;;;AAaA,eAAsB,kBACrB,OACA,EAAA,WAAA,EACA,EAAE,MAAA,EAAQ,KACT,EAAA;AACD,EAAA,MAAM,OAAO,WAAY,CAAA,WAAA,CAAA;AAEzB,EAAA,MAAM,aAAgB,GAAAA,0BAAA,CAAiB,IAAM,EAAA,MAAA,EAAQ,GAAG,CAAA,CAAA;AAExD,EAAM,MAAA,KAAA,GAAQC,kBAAO,CAAA,GAAA,CAAI,aAAa,CAAA,CAAA;AACtC,EAAA,IAAI,CAAC,KAAO,EAAA,OAAA;AAEZ,EAAA,MAAM,eAAkB,GAAA,KAAA,CAAM,MAAO,CAAA,QAAA,GAAW,KAAQ,GAAA,OAAA,CAAA;AAExD,EAAM,MAAA,UAAA,GAAaC,0BAAe,CAAA,WAAA,EAAa,eAAe,CAAA,CAAA;AAC9D,EAAA,IAAI,UAAY,EAAA,OAAA;AAEhB,EAAA,MAAM,UAAa,GAAA,OAAA,CAAQ,UAAW,CAAA,MAAA,CAAO,MAAM,UAAU,CAAA,CAAA;AAE7D,EAAA,MAAM,cAAc,MAAMC,4BAAA,CAAiB,EAAE,UAAY,EAAA,IAAA,EAAM,aAAa,CAAA,CAAA;AAC5E,EAAA,IAAI,CAAC,WAAa,EAAA,OAAA;AAElB,EAAA,OAAO,KAAM,CAAA,OAAA,KAAY,UAAc,IAAA,OAAA,CAAQ,IAAI,sBAAsB,CAAA,CAAA;AACzE,EAAI,IAAA,OAAO,KAAM,CAAA,OAAA,KAAY,UAAY,EAAA,OAAA;AAEzC,EAAA,MAAM,MAAS,GAAA,MAAM,KAAM,CAAA,OAAA,CAAQ,WAAW,CAAA,CAAA;AAE9C,EAAA,IAAI,CAAC,MAAQ,EAAA,OAAA;AACd,CAAA;AA5BsB,MAAA,CAAA,iBAAA,EAAA,mBAAA,CAAA","file":"group.cjs","sourcesContent":["import type { ChatInputCommandInteraction } from 'discord.js';\r\n\r\nimport type { Slash } from '../../builders';\r\nimport { groups } from '../../stores';\r\nimport { getGroupStoreKey } from '../../utils';\r\nimport { handleCooldown } from '../cooldown';\r\nimport { handleProtectors } from '../protectors';\r\n\r\nexport interface HandleGroupOptions {\r\n\tparent: string | null;\r\n\tsub: string | null;\r\n}\r\n\r\nexport async function handleSubcommands(\r\n\tcommand: Slash,\r\n\tinteraction: ChatInputCommandInteraction,\r\n\t{ parent, sub }: HandleGroupOptions,\r\n) {\r\n\tconst root = interaction.commandName;\r\n\r\n\tconst groupStoreKey = getGroupStoreKey(root, parent, sub);\r\n\r\n\tconst group = groups.get(groupStoreKey);\r\n\tif (!group) return;\r\n\r\n\tconst cooldownBuilder = group.config.cooldown ? group : command;\r\n\r\n\tconst onCooldown = handleCooldown(interaction, cooldownBuilder);\r\n\tif (onCooldown) return;\r\n\r\n\tconst protectors = command.protectors.concat(group.protectors);\r\n\r\n\tconst canContinue = await handleProtectors({ protectors, data: interaction });\r\n\tif (!canContinue) return;\r\n\r\n\ttypeof group.execute !== 'function' && console.log('execute not function');\r\n\tif (typeof group.execute !== 'function') return;\r\n\r\n\tconst result = await group.execute(interaction);\r\n\r\n\tif (!result) return;\r\n}\r\n"]}