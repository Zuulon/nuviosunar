{"version":3,"sources":["../../../src/handlers/modal/modal.ts"],"names":[],"mappings":";;;;;AAWA,eAAsB,YAAY,WAAqC,EAAA;AACtE,EAAA,MAAM,YAAY,MAAO,CAAA,IAAA,CAAK,CAAC,EAAE,SAAc,KAAA;AAC9C,IAAI,IAAA,OAAA,CAAQ,cAAc,MAAQ,EAAA,OAAO,QAAQ,EAAG,CAAA,IAAA,CAAK,YAAY,QAAQ,CAAA,CAAA;AAC7E,IAAO,OAAA,OAAA,CAAQ,OAAO,WAAY,CAAA,QAAA,CAAA;AAAA,GAClC,CAAA,CAAA;AAED,EAAA,IAAI,CAAC,SAAW,EAAA,OAAA;AAEhB,EAAM,MAAA,UAAA,GAAa,cAAe,CAAA,WAAA,EAAa,SAAS,CAAA,CAAA;AACxD,EAAA,IAAI,UAAY,EAAA,OAAA;AAEhB,EAAI,IAAA,OAAO,SAAU,CAAA,OAAA,KAAY,UAAY,EAAA,OAAA;AAE7C,EAAM,MAAA,WAAA,GAAc,MAAM,gBAAiB,CAAA,EAAE,YAAY,SAAU,CAAA,UAAA,EAAY,IAAM,EAAA,WAAA,EAAa,CAAA,CAAA;AAClG,EAAA,IAAI,CAAC,WAAa,EAAA,OAAA;AAElB,EAAA,MAAM,MAAS,GAAA,MAAM,SAAU,CAAA,OAAA,CAAQ,WAAW,CAAA,CAAA;AAElD,EAAA,IAAI,CAAC,MAAQ,EAAA,OAAA;AAGd,CAAA;AArBsB,MAAA,CAAA,WAAA,EAAA,aAAA,CAAA","file":"modal.js","sourcesContent":["import type { ModalSubmitInteraction } from 'discord.js';\nimport { handleCooldown } from '..';\nimport { modals } from '../../stores';\nimport { handleProtectors } from '../protectors';\n\n/**\n * Handle a modal interaction.\n * @param interaction The modal interaction to handle\n *\n * @see https://sunar.js.org/docs/guides/interactions-handling\n */\nexport async function handleModal(interaction: ModalSubmitInteraction) {\n\tconst component = modals.find(({ options }) => {\n\t\tif (options.id instanceof RegExp) return options.id.test(interaction.customId);\n\t\treturn options.id === interaction.customId;\n\t});\n\n\tif (!component) return;\n\n\tconst onCooldown = handleCooldown(interaction, component);\n\tif (onCooldown) return;\n\n\tif (typeof component.execute !== 'function') return;\n\n\tconst canContinue = await handleProtectors({ protectors: component.protectors, data: interaction });\n\tif (!canContinue) return;\n\n\tconst result = await component.execute(interaction);\n\n\tif (!result) return;\n\n\t// TODO: handle the result of the component execution\n}\n"]}